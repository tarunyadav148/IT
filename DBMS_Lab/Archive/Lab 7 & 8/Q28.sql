SELECT Dno, COUNT(*)
FROM EMPLOYEE
WHERE Salary>40000 AND Dno IN
 ( SELECT Dno
 FROM EMPLOYEE
GROUP BY Dno
 HAVING COUNT(*) > 5)
GROUP BY Dno;